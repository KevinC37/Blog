(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[4],{407:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n(47),a=Object(c.a)([function(t){return t.post.posts}],(function(t){return t}))},412:function(t,e,n){},414:function(t,e,n){},431:function(t,e,n){"use strict";n.r(e);var c=n(26),a=n(10),r=n(14),s=n.n(r),o=n(32),i=n(0),u=n(120),l=n(430),d=n(74),b=n(47),j=n(407),p=n(42),O=n(422),f=n(425),h=n(396),m=n(426),_=n(392),x=n(394),v=n(423),g=n(424),y=n(435),S=n(417),k=n.n(S),w=n(137),C=n(402),E=n(416),N=n.n(E),P=n(415),T=n.n(P),M=n(140),F=n(398),q=n(397),D=n(413),R=n.n(D),I=n(60),L=n(94),A=n(136),B=n(139),J=(n(412),n(176)),z=n(2);function H(t){var e,n,r=Object(d.c)(),u=Object(w.a)(t.title),l=Object(w.a)(t.body),b=Object(i.useState)({status:"Update post",btnColor:"primary"}),j=Object(a.a)(b,2),p=j[0],O=j[1],f=t.busEditModalState,h=L.a().shape({title:L.c().required("Oops, the title cannot be empty"),body:L.c().required("Don't forget to add some content")}),m={resolver:Object(A.a)(h)},_=Object(I.d)(m),x=_.register,v=_.handleSubmit,g=_.formState.errors,y=function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/posts/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=t.id,e.prev=1,e.next=4,y(n);case 4:O({status:"Success",btnColor:"default"}),r.dispatch(Object(B.b)(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),O({status:"'Error': ".concat(e.t0),btnColor:"secondary"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(i.useCallback)((function(t){return f(t)}),[f]);return Object(z.jsx)(J.a,{children:Object(z.jsx)("div",{className:"edit___modal___container",onClick:function(t){return t.stopPropagation()},onMouseDown:function(t){return t.stopPropagation()},children:Object(z.jsxs)("div",{className:"edit___modal___wrapper",children:[Object(z.jsxs)("div",{className:"edit___modal___header",children:[Object(z.jsx)("h2",{className:"edit___modal___header___title",children:"Edit post"}),Object(z.jsx)(q.a,{className:"edit___modal___header___close",onClick:function(t){return k(t)},children:Object(z.jsx)(R.a,{})})]}),Object(z.jsx)("div",{className:"edit___modal___body",children:Object(z.jsxs)("form",{className:"edit___modal___form",onSubmit:v(S),children:[Object(z.jsx)(F.a,Object(c.a)(Object(c.a)({},x("title")),{},{label:"Title",variant:"outlined",InputLabelProps:{shrink:!0},defaultValue:u,margin:"normal",multiline:!0,minRows:1,maxRows:2,size:"small"})),g.title?Object(z.jsx)("p",{children:null===(e=g.title)||void 0===e?void 0:e.message}):Object(z.jsx)(z.Fragment,{}),Object(z.jsx)(F.a,Object(c.a)(Object(c.a)({},x("body")),{},{label:"Body",variant:"outlined",defaultValue:l,multiline:!0,minRows:4,margin:"normal",maxRows:10,size:"medium"})),g.body?Object(z.jsx)("p",{children:null===(n=g.body)||void 0===n?void 0:n.message}):Object(z.jsx)(z.Fragment,{}),Object(z.jsx)(q.a,{type:"submit",className:"edit___modal___form___submit___button",color:p.btnColor,variant:"contained",children:p.status})]})})]})})})}n(414);var K=n(175),V=function(){var t=Object(o.a)(s.a.mark((function t(e,n){var c,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=document.getElementById("blogpost_id_".concat(e.id)),t.next=3,fetch("https://jsonplaceholder.typicode.com/posts/".concat(e.id),{method:"DELETE"});case 3:a=t.sent,!!n.getState().post.posts.filter((function(t){return t.id===e.id})).length?(n.dispatch(Object(B.c)(e.id)),c.remove()):a.ok&&c.remove();case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),W=V;function Q(t){var e=t.busMenuState,n=t.menuState,r=Object(i.useState)(!1),s=Object(a.a)(r,2),o=s[0],u=s[1],l=Object(i.useState)(!1),b=Object(a.a)(l,2),j=b[0],p=b[1],O=Object(d.c)(),f=Object(i.useCallback)((function(t){t.stopPropagation(),u(!o)}),[o]),h=Object(i.useCallback)((function(t){t.stopPropagation(),e()}),[e]);Object(i.useEffect)((function(){var t;return j&&(t=setTimeout((function(){return p(!1)}),M.b),console.log(j)),function(){return clearTimeout(t)}}),[j]);var m=Object(i.useCallback)((function(){W(t,O),p(!0)}),[t,O]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{hidden:!n,children:[Object(z.jsx)("div",{children:Object(z.jsxs)("div",{className:"card___menu",children:[Object(z.jsxs)(C.a,{onClick:function(t){return h(t)},onMouseDown:function(t){return f(t)},disableRipple:!0,children:[Object(z.jsx)(T.a,{}),Object(z.jsx)("span",{children:"Edit"})]}),Object(z.jsxs)(C.a,{onClick:m,disableRipple:!0,children:[Object(z.jsx)(N.a,{}),Object(z.jsx)("span",{children:"Delete"})]})]})}),o?Object(z.jsx)(H,Object(c.a)(Object(c.a)({},t),{},{editModalState:o,busEditModalState:function(t){return f(t)}})):Object(z.jsx)(z.Fragment,{})]}),j?Object(z.jsx)(K.a,{id:t.id,actionType:M.a.DELETE}):Object(z.jsx)(z.Fragment,{})]})}function U(t){var e,n=0;for(e=0;e<t.length;e+=1)n=t.charCodeAt(e)+((n<<5)-n);var c="#";for(e=0;e<3;e+=1){c+="00".concat((n>>8*e&255).toString(16)).substr(-2)}return c}var Z=Object(_.a)({card:{width:"350px",height:"150px",margin:"10px",position:"relative"},image:{maxWidth:"350px",maxHeight:"350px",height:"350px"},description:{alignSelf:"end"}});var G=function(t){var e=Z({}),n=Object(i.useState)(!1),r=Object(a.a)(n,2),s=r[0],o=r[1],u=Object(i.useState)(""),l=Object(a.a)(u,2),d=l[0],b=l[1];Object(i.useEffect)((function(){return"undefined"!==typeof t.user.company?b(t.user.company.name):b("Terranet")}),[t.user]);var j=Object(i.useCallback)((function(){o(!s)}),[s]);return Object(z.jsx)(x.a,{children:Object(z.jsxs)(O.a,{id:"blogpost_id_".concat(t.id),className:e.card,children:[Object(z.jsx)(v.a,{avatar:Object(z.jsx)(y.a,Object(c.a)(Object(c.a)({},function(t){try{var e=t.match(/[A-Z]/g);return{children:"".concat(e[0]).concat(e[1])}}catch(n){return console.error(n)}}(t.user.name)),{},{style:{backgroundColor:"".concat(U(String(t.user.name)))}})),title:t.user.name,subheader:d,action:Object(z.jsxs)(g.a,{id:"toggle___menu___button",onClick:j,children:[Object(z.jsx)(k.a,{}),Object(z.jsx)(Q,Object(c.a)(Object(c.a)({},t),{},{menuState:s,busMenuState:j,hidden:"true"}),t.id)]})}),Object(z.jsx)(p.b,{to:"/posts/".concat(t.id),children:Object(z.jsx)(f.a,{children:Object(z.jsx)(m.a,{children:Object(z.jsx)(h.a,{gutterBottom:!0,variant:"subtitle1",component:"div",color:"textPrimary",children:Object(w.a)(t.title)})})})})]})})},X=function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/posts/");case 2:return t.next=4,t.sent.json();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/users/");case 2:return t.next=4,t.sent.json();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function $(t){var e=t.localPosts,n=Object(u.useQueries)([{queryKey:"posts",queryFn:X},{queryKey:"users",queryFn:Y}]),r=Object(a.a)(n,2),s=r[0],o=r[1],d=Object(i.useCallback)((function(){var t=[];return s.isSuccess&&(!function(t,e){t.isSuccess&&e.isSuccess&&t.data.forEach((function(t){e.data.forEach((function(e){e.id===t.userId&&(t.user=e||"")}))}))}(s,o),s.data.map((function(e){return t.push(e)})),e.length&&e.forEach((function(e){return t.unshift(e)}))),t}),[o,s,e]),b=Object(i.useMemo)((function(){return d()}),[d]);return Object(z.jsx)(l.a,{sx:{display:"flex",alignItems:"flex-start",p:1,m:1,bgcolor:"background.paper",height:124,flexWrap:"wrap"},children:s.isSuccess&&o.isSuccess?b.map((function(t){return Object(z.jsx)(G,Object(c.a)({},t),t.id)})):Object(z.jsx)("div",{children:"Loading..."})})}var tt=Object(i.memo)($),et=Object(b.b)({localPosts:j.a});e.default=Object(d.b)(et)(tt)}}]);
//# sourceMappingURL=4.6201d44a.chunk.js.map